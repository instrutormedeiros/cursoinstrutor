<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Curso de Instrutor de Treinamentos - GATE</title>
    <script src="https://cdn.tailwindcss.com"></script> <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.9.3/dist/confetti.browser.min.js"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        body {
            font-family: ui-sans-serif, system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, "Noto Sans", sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol", "Noto Color Emoji";
            background-color: #F3F4F6; /* bg-gray-100 */
            scroll-behavior: smooth;
        }
        .sidebar {
            position: sticky;
            top: 0.5rem;
            max-height: calc(100vh - 5rem); 
            overflow-y: auto;
            background-color: #FFFFFF; 
            padding: 1rem;
            border-radius: 0.5rem; 
            box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06);
        }
        select {
            appearance: none;
            background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' fill='none' viewBox='0 0 24 24' stroke-width='1.5' stroke='currentColor'%3E%3Cpath stroke-linecap='round' stroke-linejoin='round' d='M19.5 8.25l-7.5 7.5-7.5-7.5' /%3E%3C/svg%3E");
            background-repeat: no-repeat;
            background-position: right 0.5rem center;
            background-size: 1.2em;
        }
        #content-area {
            transition: opacity 0.3s ease;
        }
        #content-area.fade {
            opacity: 0;
        }
        .quiz-option {
            cursor: pointer;
            padding: 0.75rem;
            border-radius: 0.5rem;
            margin-bottom: 0.5rem;
            transition: background-color 0.3s ease, color 0.3s ease;
            background-color: #e5e7eb;
            border: 1px solid #d1d5db; 
        }
        .quiz-option:hover {
            background-color: #d1d5db; 
        }
        .quiz-option.correct {
            background-color: #10b981 !important; 
            color: #ffffff !important;
            border-color: #059669 !important; 
        }
        .quiz-option.incorrect {
            background-color: #ef4444 !important; 
            color: #ffffff !important;
            border-color: #dc2626 !important; 
        }
        .quiz-option:disabled {
            cursor: not-allowed;
            opacity: 0.7;
        }
        .explanation {
            padding: 0.5rem;
            margin-top: 0.25rem;
            margin-bottom: 1rem;
            border-radius: 0.25rem;
            background-color: #eff6ff; 
            color: #1e40af; 
            border: 1px solid #bfdbfe; 
        }
        .progress-container {
            position: sticky;
            top: 0;
            z-index: 50; 
            background: #fff; 
            padding: 0.5rem 0;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
        }
        .progress-bar {
            height: 1rem;
            background: #f97316; 
            transition: width 0.3s ease;
            border-radius: 0.25rem;
        }
        .conclude-button {
            background-color: #F97316; 
            color: white;
            font-weight: 600; 
            padding: 0.5rem 1.5rem; 
            border-radius: 0.25rem; 
            transition: background-color 0.2s ease;
        }
        .conclude-button:hover {
            background-color: #EA580C; 
        }
        .conclude-button:disabled {
            background: #d1d5db !important; 
            color: #6b7280; 
            cursor: not-allowed;
        }
        #congratulations-message {
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            z-index: 100;
            opacity: 0;
            transition: opacity 0.5s ease;
            background-color: white;
            padding: 1.5rem; 
            border-radius: 0.5rem; 
            box-shadow: 0 10px 15px -3px rgba(0,0,0,0.1), 0 4px 6px -2px rgba(0,0,0,0.05); 
            text-align: center;
            max-width: 28rem; 
        }
        #congratulations-message.show {
            opacity: 1;
        }
        #certificate-form-container {
            display: none;
            /* Styles for certificate form container in footer are applied inline or by Tailwind */
        }
        #certificate-form-container.show {
            display: block;
        }
        
        /* Styles for content imported from GATE course, adapted for consistency */
        #content-area h3 { font-size: 1.5rem; font-weight: 600; margin-bottom: 1rem; color: #1E3A8A; display: flex; align-items: center;}
        #content-area h4 { font-size: 1.25rem; font-weight: 600; margin-bottom: 0.5rem; color: #1E40AF; }
        #content-area h5 { font-size: 1.125rem; font-weight: 600; margin-bottom: 0.5rem; color: #1E40AF; }
        #content-area p { margin-bottom: 1rem; color: #4B5563; line-height: 1.625; }
        #content-area ul { list-style-type: disc; margin-left: 1.25rem; margin-bottom: 1rem; color: #4B5563; }
        #content-area .bg-blue-50 { background-color: #EFF6FF; border: 1px solid #DBEAFE; padding: 1rem; border-radius: 0.375rem; margin-bottom: 1rem; }
        #content-area .text-blue-900 { color: #1E3A8A; }

        /* Social links styles from NR-10 */
        .social-link:hover {
            text-decoration: underline;
        }

        @media (max-width: 768px) {
            .sidebar {
                position: relative;
                max-height: none;
                width: 100%;
                margin-bottom: 1rem; 
            }
            .flex-col.md\:flex-row {
                flex-direction: column;
            }
            .social-links { /* Added from NR-10 for responsive footer links */
                flex-direction: column;
                gap: 0.5rem;
            }
        }
    </style>
</head>
<body class="text-gray-800">
    <div class="progress-container">
        <div class="container mx-auto px-6">
            <p class="text-sm font-semibold mb-1">Progresso: <span id="progress-text">0%</span></p>
            <div class="w-full bg-gray-200 rounded">
                <div id="progress-bar" class="progress-bar" style="width: 0%"></div>
            </div>
        </div>
    </div>

    <header class="bg-gradient-to-r from-blue-800 to-blue-600 text-white py-4 shadow-md">
        <div class="container mx-auto px-6 flex justify-between items-center">
            <div class="flex items-center">
                <img src="https://i.imgur.com/BcCZUQw.png" alt="Logo GATE" class="h-12 sm:h-14 mr-3">
                <h1 class="text-xl sm:text-2xl md:text-3xl font-bold">Curso de Instrutor de Treinamentos</h1>
            </div>
        </div>
    </header>

    <div class="container mx-auto px-6 py-8 flex flex-col md:flex-row gap-6">
        <aside class="md:w-1/3">
            <div class="sidebar">
                <h2 class="text-xl font-semibold mb-3 flex items-center text-gray-700">
                    <svg class="w-6 h-6 mr-2 text-orange-500" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 6.253v13m0-13C10.832 5.477 9.246 5 7.5 5S4.168 5.477 3 6.253v13C4.168 18.477 5.754 18 7.5 18s3.332.477 4.5 1.253m0-13C13.168 5.477 14.754 5 16.5 5c1.747 0 3.332.477 4.5 1.253v13C19.832 18.477 18.247 18 16.5 18c-1.746 0-3.332.477-4.5 1.253"></path></svg>
                    Selecionar Módulo
                </h2>
                <select id="module-selector" class="w-full p-3 border border-gray-300 rounded bg-white text-gray-700 focus:outline-none focus:ring-2 focus:ring-orange-500 text-base">
                    <option value="">Escolha um Módulo</option>
                </select>
            </div>
        </aside>

        <main class="md:w-2/3 bg-white p-6 rounded-lg shadow-md">
            <div id="content-area">
                <h2 class="text-2xl font-semibold mb-4 flex items-center text-blue-800">
                    <i class="fas fa-info-circle mr-2 text-orange-500"></i>
                    Bem-vindo ao Curso!
                </h2>
                <p class="text-gray-700 mb-3">
                    O Curso de Instrutor de Treinamentos do GATE forma profissionais para liderar com competência, transmitindo conhecimentos práticos e éticos. Aprenda a planejar aulas, gerir turmas e avaliar desempenhos, tornando-se uma referência em ensino.
                </p>
                <p class="text-gray-700 mb-3">Selecione um módulo na barra lateral para começar.</p>
                 <div class="text-center my-6">
                    <a href="https://example.com/curso-gate.pdf" download class="inline-flex items-center bg-blue-800 text-white px-6 py-3 rounded-md hover:bg-orange-600 transition-colors duration-200">
                        <i class="fas fa-download mr-2"></i>Baixar PDF do Curso (Exemplo)
                    </a>
                </div>
                <div class="grid sm:grid-cols-2 md:grid-cols-3 gap-6 mt-8">
                    <div class="bg-gray-50 p-6 rounded-lg shadow text-center">
                        <i class="fas fa-chalkboard-teacher text-3xl text-orange-500 mb-4"></i>
                        <h3 class="text-lg font-semibold text-blue-700">Prática e Teoria</h3>
                        <p class="text-sm text-gray-600">Metodologias ativas e fundamentos sólidos.</p>
                    </div>
                    <div class="bg-gray-50 p-6 rounded-lg shadow text-center">
                        <i class="fas fa-certificate text-3xl text-orange-500 mb-4"></i>
                        <h3 class="text-lg font-semibold text-blue-700">Certificação</h3>
                        <p class="text-sm text-gray-600">Certificado reconhecido ao concluir.</p>
                    </div>
                    <div class="bg-gray-50 p-6 rounded-lg shadow text-center">
                        <i class="fas fa-users text-3xl text-orange-500 mb-4"></i>
                        <h3 class="text-lg font-semibold text-blue-700">Networking</h3>
                        <p class="text-sm text-gray-600">Conexão com outros profissionais.</p>
                    </div>
                </div>
            </div>
        </main>
    </div>

    <div id="congratulations-message" class="hidden">
        <h2 class="text-2xl font-bold text-orange-600 mb-4">Parabéns!</h2>
        <p class="text-lg mb-4">Você concluiu o Curso de Instrutor de Treinamentos com sucesso! Desejamos muito sucesso na sua jornada profissional.</p>
        <button id="close-congrats" class="bg-orange-600 text-white font-semibold py-2 px-4 rounded hover:bg-orange-500 focus:outline-none focus:ring-2 focus:ring-orange-400">Fechar</button>
    </div>

    <footer class="bg-blue-900 text-white py-8 mt-12">
        <div class="container mx-auto px-6 text-center">
            <img src="https://i.imgur.com/BcCZUQw.png" alt="Logo GATE" class="h-12 max-w-xs mb-4 mx-auto">
            <p class="text-base mb-2">© 2025 Curso de Instrutor de Treinamentos - GATE. Todos os direitos reservados.</p>
            <p class="text-sm mb-3">Ensino para formar profissionais. Vivo para edificar gerações.</p>
            
            <div class="flex justify-center gap-4 md:gap-6 social-links mb-6 mt-4">
                <a href="https://www.instagram.com/coordenadormedeiros" class="flex items-center text-gray-300 hover:text-orange-400 social-link transition-colors" target="_blank">
                    <svg class="w-5 h-5 mr-2" fill="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                        <path d="M12 2.163c3.204 0 3.584.012 4.85.07 3.252.148 4.771 1.691 4.919 4.919.058 1.265.069 1.645.069 4.849 0 3.205-.012 3.584-.069 4.849-.149 3.225-1.664 4.771-4.919 4.919-1.266.058-1.644.07-4.85.07-3.204 0-3.584-.012-4.849-.07-3.26-.149-4.771-1.699-4.919-4.92-.058-1.265-.07-1.644-.07-4.849 0-3.204.013-3.583.07-4.849.149-3.227 1.664-4.771 4.919-4.919 1.266-.057 1.645-.069 4.849-.069zM12 0C8.741 0 8.332.014 7.052.072 2.95.227.228 2.996.073 7.052.014 8.332 0 8.741 0 12c0 3.259.014 3.668.072 4.948.225 4.053 2.992 6.771 7.048 6.927 1.28.058 1.689.072 4.948.072s3.668-.014 4.948-.072c4.054-.156 6.772-2.874 6.927-6.93.058-1.28.072-1.689.072-4.948s-.014-3.668-.072-4.948c-.156-4.054-2.874-6.772-6.93-6.927C15.668.014 15.259 0 12 0zm0 5.838a6.162 6.162 0 100 12.324 6.162 6.162 0 000-12.324zm0 10.162a3.999 3.999 0 110-7.998 3.999 3.999 0 010 7.998zm6.406-11.845a1.44 1.44 0 11-2.88 0 1.44 1.44 0 012.88 0z"/>
                    </svg>
                    @coordenadormedeiros
                </a>
                <a href="https://wa.me/5561981397421" class="flex items-center text-gray-300 hover:text-orange-400 social-link transition-colors" target="_blank">
                    <svg class="w-5 h-5 mr-2" fill="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                        <path d="M12 0C5.373 0 0 5.373 0 12c0 2.117.558 4.114 1.532 5.853L0 24l6.297-1.532A11.93 11.93 0 0012 24c6.627 0 12-5.373 12-12S18.627 0 12 0zm0 22.054a9.977 9.977 0 01-5.094-1.406l-.354-.198-3.73.908.916-3.642-.206-.36a9.96 9.96 0 01-1.532-5.406c0-5.514 4.486-10 10-10s10 4.486 10 10-4.486 10-10 10zm5.964-7.053c-.328-.164-1.94-.954-2.242-1.064-.302-.11-.521-.164-.739.164-.219.328-.853 1.064-.985 1.283-.132.219-.263.246-.602.082-.328-.164-1.39-.512-2.65-1.634-1.283-1.149-2.146-2.575-2.378-3.003-.232-.428-.024-.657.175-.821.175-.146.394-.37.592-.554.197-.184.263-.246.394-.41.132-.164.066-.246-.033-.344-.099-.098-.886-.955-1.215-1.313-.328-.356-.657-.302-.886-.302h-.755c-.232 0-.602.082-.916.411-.315.328-1.203 1.17-1.203 2.85s1.234 3.31 1.405 3.542c.175.232 2.443 3.74 5.914 5.242.821.356 1.463.568 1.966.73.592.191 1.13.164 1.556.1.478-.073 1.94-.794 2.211-1.56.263-.766.263-1.426.197-1.56-.066-.136-.302-.219-.631-.383z"/>
                    </svg>
                    (61) 98139-7421
                </a>
                <a href="https://www.linkedin.com/in/chefemedeiros" class="flex items-center text-gray-300 hover:text-orange-400 social-link transition-colors" target="_blank">
                    <svg class="w-5 h-5 mr-2" fill="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                        <path d="M22.23 0H1.77C.79 0 0 .77 0 1.72v20.56C0 23.23.79 24 1.77 24h20.46c.98 0 1.77-.77 1.77-1.72V1.72C24 .77 23.21 0 22.23 0zM7.12 20.45H3.56V9.06h3.56v11.39zM5.34 7.67c-1.14 0-2.06-.92-2.06-2.06 0-1.14.92-2.06 2.06-2.06s2.06.92 2.06 2.06c0 1.14-.92 2.06-2.06 2.06zm15.11 12.78h-3.56v-5.56c0-1.33-.03-3.03-1.85-3.03-1.85 0-2.13 1.44-2.13 2.94v5.65H9.3V9.06h3.41v1.55h.05c.47-.89 1.62-1.83 3.34-1.83 3.57 0 4.23 2.35 4.23 5.41v6.26z"/>
                    </svg>
                    chefemedeiros
                </a>
            </div>

            <div id="certificate-form-container" class="max-w-md mx-auto mt-8 text-left bg-blue-800 p-6 rounded-lg">
                <h3 class="text-xl font-semibold mb-3 text-white">Solicite seu Certificado</h3>
                <p class="text-sm mb-4 text-gray-300">Preencha os campos abaixo para receber seu certificado de conclusão:</p>
                <div class="space-y-4">
                    <div>
                        <label for="full-name" class="block text-sm font-medium text-gray-200">Nome Completo</label>
                        <input type="text" id="full-name" required class="w-full p-2 border border-blue-700 rounded bg-blue-700 text-white focus:outline-none focus:ring-2 focus:ring-orange-500 placeholder-gray-400">
                    </div>
                    <div>
                        <label for="cpf" class="block text-sm font-medium text-gray-200">CPF</label>
                        <input type="text" id="cpf" required pattern="\\d{3}\\.\\d{3}\\.\\d{3}-\\d{2}" placeholder="123.456.789-00" class="w-full p-2 border border-blue-700 rounded bg-blue-700 text-white focus:outline-none focus:ring-2 focus:ring-orange-500 placeholder-gray-400">
                    </div>
                    <div>
                        <label for="email" class="block text-sm font-medium text-gray-200">E-mail</label>
                        <input type="email" id="email" required class="w-full p-2 border border-blue-700 rounded bg-blue-700 text-white focus:outline-none focus:ring-2 focus:ring-orange-500 placeholder-gray-400">
                    </div>
                    <button id="submit-certificate" class="bg-orange-600 text-white font-semibold py-2 px-4 rounded hover:bg-orange-500 focus:outline-none focus:ring-2 focus:ring-orange-400 w-full transition-colors">Enviar Solicitação</button>
                </div>
            </div>
        </div>
    </footer>

    <script>
        // Script para XLSX (mantido do modelo anterior, mas não usado diretamente neste curso)
        var gk_isXlsx = false;
        var gk_xlsxFileLookup = {};
        var gk_fileData = {};
        function filledCell(cell) { return cell !== '' && cell != null; }
        function loadFileData(filename) {
            if (gk_isXlsx && gk_xlsxFileLookup[filename]) {
                try {
                    var workbook = XLSX.read(gk_fileData[filename], { type: 'base64' });
                    var firstSheetName = workbook.SheetNames[0];
                    var worksheet = workbook.Sheets[firstSheetName];
                    var jsonData = XLSX.utils.sheet_to_json(worksheet, { header: 1, blankrows: false, defval: '' });
                    var filteredData = jsonData.filter(row => row.some(filledCell));
                    var headerRowIndex = filteredData.findIndex((row, index) => row.filter(filledCell).length >= filteredData[index + 1]?.filter(filledCell).length);
                    if (headerRowIndex === -1 || headerRowIndex > 25) { headerRowIndex = 0; }
                    var csv = XLSX.utils.aoa_to_sheet(filteredData.slice(headerRowIndex));
                    csv = XLSX.utils.sheet_to_csv(csv, { header: 1 });
                    return csv;
                } catch (e) { console.error(e); return ""; }
            }
            return gk_fileData[filename] || "";
        }

        const totalModules = 10;
        let completedModules = JSON.parse(localStorage.getItem('gateInstructorCompletedModules')) || [];

        const correctAnswers = {
            'module1-q1': 'c', 'module1-q2': 'c', 'module1-q3': 'c',
            'module2-q1': 'b', 'module2-q2': 'b',
            'module3-q1': 'b', 'module3-q2': 'b',
            'module4-q1': 'b', 'module4-q2': 'b',
            'module5-q1': 'b', 'module5-q2': 'b',
            'module6-q1': 'c', 'module6-q2': 'b',
            'module7-q1': 'b', 'module7-q2': 'b',
            'module8-q1': 'b', 'module8-q2': 'b',
            'module9-q1': 'b', 'module9-q2': 'b',
            'module10-q1': 'b', 'module10-q2': 'b'
        };
        
        const moduleContent = {
            module1: {
                id: "module1",
                title: "1. Conceito de Instrutor",
                iconClass: "fas fa-book",
                content: `
                    <h4 class="text-lg font-semibold mb-2">1.1 Definição de Instrutor</h4>
                    <p>O instrutor é um profissional especializado em transmitir conhecimentos técnicos e práticos, guiando os alunos no processo de aprendizado com foco em habilidades específicas.</p>
                    <h4 class="text-lg font-semibold mb-2">1.2 Papel e Responsabilidades</h4>
                    <p>O instrutor desempenha múltiplos papéis, incluindo:</p>
                    <ul><li>Facilitador do aprendizado</li><li>Modelagem comportamental</li><li>Orientador</li><li>Avaliador</li><li>Motivador</li></ul>
                    <h4 class="text-lg font-semibold mb-2">1.3 Diferenças entre Instrutor, Professor e Mentor</h4>
                    <p>Embora relacionados, esses papéis têm distinções claras:</p>
                    <ul><li>Instrutor: Foca na transmissão de habilidades práticas.</li><li>Professor: Trabalha em contextos acadêmicos formais.</li><li>Mentor: Oferece orientação personalizada de longo prazo.</li></ul>
                    <h4 class="text-lg font-semibold mb-2">1.4 Importância do Instrutor</h4>
                    <p>O instrutor é essencial para capacitar profissionais, garantindo competências necessárias.</p>
                    <div class="bg-blue-50 p-4 rounded-lg mb-4"><h5 class="font-semibold text-blue-900">Exemplo Prático</h5><p>Em um curso de Prevenção de Incêndios, o instrutor apresenta a teoria, conduz simulações e avalia os alunos.</p></div>
                    <hr class="my-6 border-gray-300">
                    <h3 class="text-xl font-semibold mb-4 text-blue-700">Exercícios de Fixação</h3>
                    <p class="font-semibold mb-2 text-gray-700">1. Qual é a principal função de um instrutor?</p>
                    <div class="quiz-options-group space-y-2 mb-4">
                        <div class="quiz-option" data-question="module1-q1" data-answer="a">a) Ensinar apenas a teoria.</div>
                        <div class="quiz-option" data-question="module1-q1" data-answer="b">b) Certificar alunos automaticamente.</div>
                        <div class="quiz-option" data-question="module1-q1" data-answer="c">c) Facilitar o aprendizado e desenvolver competências práticas.</div>
                        <div class="quiz-option" data-question="module1-q1" data-answer="d">d) Fazer todo o trabalho para os alunos.</div>
                    </div>
                    <p id="explanation-module1-q1" class="explanation hidden"></p>
                    <p class="font-semibold mt-4 mb-2 text-gray-700">2. Qual das opções diferencia um instrutor de um professor?</p>
                    <div class="quiz-options-group space-y-2 mb-4">
                        <div class="quiz-option" data-question="module1-q2" data-answer="a">a) O instrutor trabalha com metodologias formais.</div>
                        <div class="quiz-option" data-question="module1-q2" data-answer="b">b) O professor foca em habilidades práticas.</div>
                        <div class="quiz-option" data-question="module1-q2" data-answer="c">c) O instrutor prioriza a prática em contextos específicos.</div>
                        <div class="quiz-option" data-question="module1-q2" data-answer="d">d) Ambos realizam as mesmas atividades.</div>
                    </div>
                    <p id="explanation-module1-q2" class="explanation hidden"></p>
                    <p class="font-semibold mt-4 mb-2 text-gray-700">3. Qual papel NÃO é do instrutor?</p>
                    <div class="quiz-options-group space-y-2">
                        <div class="quiz-option" data-question="module1-q3" data-answer="a">a) Avaliar desempenho.</div>
                        <div class="quiz-option" data-question="module1-q3" data-answer="b">b) Orientar alunos.</div>
                        <div class="quiz-option" data-question="module1-q3" data-answer="c">c) Planejar currículos acadêmicos extensos.</div>
                        <div class="quiz-option" data-question="module1-q3" data-answer="d">d) Motivar participação.</div>
                    </div>
                    <p id="explanation-module1-q3" class="explanation hidden"></p>
                ` // Conclude button will be added by JS if missing from content string
            },
            module2: {
                id: "module2",
                title: "2. Perfil do Instrutor",
                iconClass: "fas fa-user",
                content: `
                    <h4 class="text-lg font-semibold mb-2">2.1 Características Essenciais</h4>
                    <p>Um bom instrutor deve ser comunicativo, empático, organizado e adaptável às necessidades dos alunos.</p>
                    <h4 class="text-lg font-semibold mb-2">2.2 Habilidades Técnicas</h4>
                    <p>Domínio do conteúdo, uso de ferramentas educacionais e capacidade de conduzir dinâmicas práticas.</p>
                    <h4 class="text-lg font-semibold mb-2">2.3 Desenvolvimento Pessoal</h4>
                    <p>O instrutor deve buscar capacitação contínua e feedback para melhorar sua prática.</p>
                    <div class="bg-blue-50 p-4 rounded-lg mb-4"><h5 class="font-semibold text-blue-900">Exemplo Prático</h5><p>Um instrutor de segurança adapta sua abordagem para diferentes públicos, como novatos e experientes.</p></div>
                    <hr class="my-6 border-gray-300">
                    <h3 class="text-xl font-semibold mb-4 text-blue-700">Exercícios de Fixação</h3>
                    <p class="font-semibold mb-2 text-gray-700">1. Qual característica é essencial para um instrutor?</p>
                    <div class="quiz-options-group space-y-2 mb-4">
                        <div class="quiz-option" data-question="module2-q1" data-answer="a">a) Rigidez excessiva.</div>
                        <div class="quiz-option" data-question="module2-q1" data-answer="b">b) Comunicação clara.</div>
                        <div class="quiz-option" data-question="module2-q1" data-answer="c">c) Foco apenas em teoria.</div>
                        <div class="quiz-option" data-question="module2-q1" data-answer="d">d) Pouca organização.</div>
                    </div>
                    <p id="explanation-module2-q1" class="explanation hidden"></p>
                    <p class="font-semibold mt-4 mb-2 text-gray-700">2. O que um instrutor deve buscar continuamente?</p>
                    <div class="quiz-options-group space-y-2">
                        <div class="quiz-option" data-question="module2-q2" data-answer="a">a) Menos interação com alunos.</div>
                        <div class="quiz-option" data-question="module2-q2" data-answer="b">b) Capacitação e feedback.</div>
                        <div class="quiz-option" data-question="module2-q2" data-answer="c">c) Aulas padronizadas.</div>
                        <div class="quiz-option" data-question="module2-q2" data-answer="d">d) Menos prática.</div>
                    </div>
                    <p id="explanation-module2-q2" class="explanation hidden"></p>
                `
            },
            module3: {
                id: "module3",
                title: "3. Fundamentos de Andragogia",
                iconClass: "fas fa-brain",
                content: `
                    <h4 class="text-lg font-semibold mb-2">3.1 O que é Andragogia?</h4>
                    <p>Andragogia é a ciência de ensinar adultos, considerando sua autonomia e experiência prévia.</p>
                    <h4 class="text-lg font-semibold mb-2">3.2 Princípios de Knowles</h4>
                    <p>Incluem autonomia, experiência, relevância, orientação para objetivos e motivação interna.</p>
                    <h4 class="text-lg font-semibold mb-2">3.3 Aplicação Prática</h4>
                    <p>Uso de estudos de caso e dinâmicas que valorizam a experiência dos alunos.</p>
                    <div class="bg-blue-50 p-4 rounded-lg mb-4"><h5 class="font-semibold text-blue-900">Exemplo Prático</h5><p>Em um curso de primeiros socorros, o instrutor usa experiências reais dos alunos para discutir técnicas.</p></div>
                    <hr class="my-6 border-gray-300">
                    <h3 class="text-xl font-semibold mb-4 text-blue-700">Exercícios de Fixação</h3>
                    <p class="font-semibold mb-2 text-gray-700">1. O que diferencia a andragogia da pedagogia?</p>
                    <div class="quiz-options-group space-y-2 mb-4">
                        <div class="quiz-option" data-question="module3-q1" data-answer="a">a) Foco em crianças.</div>
                        <div class="quiz-option" data-question="module3-q1" data-answer="b">b) Foco em adultos autônomos.</div>
                        <div class="quiz-option" data-question="module3-q1" data-answer="c">c) Uso de métodos teóricos.</div>
                        <div class="quiz-option" data-question="module3-q1" data-answer="d">d) Menor interação.</div>
                    </div>
                    <p id="explanation-module3-q1" class="explanation hidden"></p>
                    <p class="font-semibold mt-4 mb-2 text-gray-700">2. Qual é um princípio da andragogia?</p>
                    <div class="quiz-options-group space-y-2">
                        <div class="quiz-option" data-question="module3-q2" data-answer="a">a) Ignorar experiências prévias.</div>
                        <div class="quiz-option" data-question="module3-q2" data-answer="b">b) Valorizar a autonomia do aluno.</div>
                        <div class="quiz-option" data-question="module3-q2" data-answer="c">c) Foco em memorização.</div>
                        <div class="quiz-option" data-question="module3-q2" data-answer="d">d) Ensino padronizado.</div>
                    </div>
                    <p id="explanation-module3-q2" class="explanation hidden"></p>
                `
            },
            module4: {
                id: "module4",
                title: "4. Planejamento de Aulas",
                iconClass: "fas fa-clipboard-list",
                content: `
                    <h4 class="text-lg font-semibold mb-2">4.1 Objetivos de Aprendizado</h4>
                    <p>Definir metas claras e mensuráveis para cada aula.</p>
                    <h4 class="text-lg font-semibold mb-2">4.2 Estrutura de Aula</h4>
                    <p>Introdução, desenvolvimento, prática e conclusão.</p>
                    <h4 class="text-lg font-semibold mb-2">4.3 Ferramentas de Planejamento</h4>
                    <p>Planos de aula, cronogramas e recursos visuais.</p>
                    <div class="bg-blue-50 p-4 rounded-lg mb-4"><h5 class="font-semibold text-blue-900">Exemplo Prático</h5><p>Um instrutor cria um plano de aula com simulações para ensinar evacuação de emergência.</p></div>
                    <hr class="my-6 border-gray-300">
                    <h3 class="text-xl font-semibold mb-4 text-blue-700">Exercícios de Fixação</h3>
                    <p class="font-semibold mb-2 text-gray-700">1. Qual é o primeiro passo no planejamento de aula?</p>
                    <div class="quiz-options-group space-y-2 mb-4">
                        <div class="quiz-option" data-question="module4-q1" data-answer="a">a) Escolher o local.</div>
                        <div class="quiz-option" data-question="module4-q1" data-answer="b">b) Definir objetivos.</div>
                        <div class="quiz-option" data-question="module4-q1" data-answer="c">c) Criar slides.</div>
                        <div class="quiz-option" data-question="module4-q1" data-answer="d">d) Avaliar alunos.</div>
                    </div>
                    <p id="explanation-module4-q1" class="explanation hidden"></p>
                    <p class="font-semibold mt-4 mb-2 text-gray-700">2. O que deve incluir a estrutura de uma aula?</p>
                    <div class="quiz-options-group space-y-2">
                        <div class="quiz-option" data-question="module4-q2" data-answer="a">a) Apenas teoria.</div>
                        <div class="quiz-option" data-question="module4-q2" data-answer="b">b) Introdução, prática e conclusão.</div>
                        <div class="quiz-option" data-question="module4-q2" data-answer="c">c) Apenas prática.</div>
                        <div class="quiz-option" data-question="module4-q2" data-answer="d">d) Apenas avaliação.</div>
                    </div>
                    <p id="explanation-module4-q2" class="explanation hidden"></p>
                `
            },
            module5: {
                id: "module5",
                title: "5. Metodologias de Ensino",
                iconClass: "fas fa-chalkboard",
                content: `
                    <h4 class="text-lg font-semibold mb-2">5.1 Métodos Ativos</h4>
                    <p>Aprendizado baseado em problemas, estudos de caso e dinâmicas de grupo.</p>
                    <h4 class="text-lg font-semibold mb-2">5.2 Métodos Tradicionais</h4>
                    <p>Aulas expositivas e leituras dirigidas.</p>
                    <h4 class="text-lg font-semibold mb-2">5.3 Escolha da Metodologia</h4>
                    <p>Depende do público, objetivos e recursos disponíveis.</p>
                    <div class="bg-blue-50 p-4 rounded-lg mb-4"><h5 class="font-semibold text-blue-900">Exemplo Prático</h5><p>Um instrutor usa um estudo de caso para ensinar tomada de decisão em emergências.</p></div>
                    <hr class="my-6 border-gray-300">
                    <h3 class="text-xl font-semibold mb-4 text-blue-700">Exercícios de Fixação</h3>
                    <p class="font-semibold mb-2 text-gray-700">1. Qual é um exemplo de metodologia ativa?</p>
                    <div class="quiz-options-group space-y-2 mb-4">
                        <div class="quiz-option" data-question="module5-q1" data-answer="a">a) Aula expositiva.</div>
                        <div class="quiz-option" data-question="module5-q1" data-answer="b">b) Estudo de caso.</div>
                        <div class="quiz-option" data-question="module5-q1" data-answer="c">c) Leitura obrigatória.</div>
                        <div class="quiz-option" data-question="module5-q1" data-answer="d">d) Prova escrita.</div>
                    </div>
                    <p id="explanation-module5-q1" class="explanation hidden"></p>
                    <p class="font-semibold mt-4 mb-2 text-gray-700">2. O que influencia a escolha da metodologia?</p>
                    <div class="quiz-options-group space-y-2">
                        <div class="quiz-option" data-question="module5-q2" data-answer="a">a) Apenas o tempo disponível.</div>
                        <div class="quiz-option" data-question="module5-q2" data-answer="b">b) Público e objetivos.</div>
                        <div class="quiz-option" data-question="module5-q2" data-answer="c">c) Apenas o conteúdo.</div>
                        <div class="quiz-option" data-question="module5-q2" data-answer="d">d) Preferência do instrutor.</div>
                    </div>
                    <p id="explanation-module5-q2" class="explanation hidden"></p>
                `
            },
            module6: {
                id: "module6",
                title: "6. Comunicação Eficaz",
                iconClass: "fas fa-comments",
                content: `
                    <h4 class="text-lg font-semibold mb-2">6.1 Comunicação Verbal</h4>
                    <p>Clareza, tom de voz e linguagem adequada ao público.</p>
                    <h4 class="text-lg font-semibold mb-2">6.2 Comunicação Não Verbal</h4>
                    <p>Gestos, expressões faciais e contato visual.</p>
                    <h4 class="text-lg font-semibold mb-2">6.3 Escuta Ativa</h4>
                    <p>Ouvir os alunos para entender suas dúvidas e necessidades.</p>
                    <div class="bg-blue-50 p-4 rounded-lg mb-4"><h5 class="font-semibold text-blue-900">Exemplo Prático</h5><p>Um instrutor usa linguagem clara e mantém contato visual para engajar os alunos.</p></div>
                    <hr class="my-6 border-gray-300">
                    <h3 class="text-xl font-semibold mb-4 text-blue-700">Exercícios de Fixação</h3>
                    <p class="font-semibold mb-2 text-gray-700">1. O que é essencial na comunicação verbal?</p>
                    <div class="quiz-options-group space-y-2 mb-4">
                        <div class="quiz-option" data-question="module6-q1" data-answer="a">a) Falar rápido.</div>
                        <div class="quiz-option" data-question="module6-q1" data-answer="b">b) Usar jargões complexos.</div>
                        <div class="quiz-option" data-question="module6-q1" data-answer="c">c) Clareza e tom adequado.</div>
                        <div class="quiz-option" data-question="module6-q1" data-answer="d">d) Evitar interação.</div>
                    </div>
                    <p id="explanation-module6-q1" class="explanation hidden"></p>
                    <p class="font-semibold mt-4 mb-2 text-gray-700">2. O que caracteriza a escuta ativa?</p>
                    <div class="quiz-options-group space-y-2">
                        <div class="quiz-option" data-question="module6-q2" data-answer="a">a) Ignorar perguntas.</div>
                        <div class="quiz-option" data-question="module6-q2" data-answer="b">b) Ouvir e responder às necessidades.</div>
                        <div class="quiz-option" data-question="module6-q2" data-answer="c">c) Focar apenas no instrutor.</div>
                        <div class="quiz-option" data-question="module6-q2" data-answer="d">d) Evitar contato visual.</div>
                    </div>
                    <p id="explanation-module6-q2" class="explanation hidden"></p>
                `
            },
            module7: {
                id: "module7",
                title: "7. Avaliação e Feedback",
                iconClass: "fas fa-check-circle",
                content: `
                    <h4 class="text-lg font-semibold mb-2">7.1 Tipos de Avaliação</h4>
                    <p>Formativa, somativa e diagnóstica.</p>
                    <h4 class="text-lg font-semibold mb-2">7.2 Técnicas de Feedback</h4>
                    <p>Feedback construtivo, específico e oportuno.</p>
                    <h4 class="text-lg font-semibold mb-2">7.3 Importância do Feedback</h4>
                    <p>Melhora o desempenho e motiva os alunos.</p>
                    <div class="bg-blue-50 p-4 rounded-lg mb-4"><h5 class="font-semibold text-blue-900">Exemplo Prático</h5><p>Um instrutor dá feedback específico após uma simulação de evacuação.</p></div>
                    <hr class="my-6 border-gray-300">
                    <h3 class="text-xl font-semibold mb-4 text-blue-700">Exercícios de Fixação</h3>
                    <p class="font-semibold mb-2 text-gray-700">1. Qual é um tipo de avaliação?</p>
                    <div class="quiz-options-group space-y-2 mb-4">
                        <div class="quiz-option" data-question="module7-q1" data-answer="a">a) Apenas teórica.</div>
                        <div class="quiz-option" data-question="module7-q1" data-answer="b">b) Formativa.</div>
                        <div class="quiz-option" data-question="module7-q1" data-answer="c">c) Apenas prática.</div>
                        <div class="quiz-option" data-question="module7-q1" data-answer="d">d) Não estruturada.</div>
                    </div>
                    <p id="explanation-module7-q1" class="explanation hidden"></p>
                    <p class="font-semibold mt-4 mb-2 text-gray-700">2. O que caracteriza um bom feedback?</p>
                    <div class="quiz-options-group space-y-2">
                        <div class="quiz-option" data-question="module7-q2" data-answer="a">a) Ser vago.</div>
                        <div class="quiz-option" data-question="module7-q2" data-answer="b">b) Ser construtivo e específico.</div>
                        <div class="quiz-option" data-question="module7-q2" data-answer="c">c) Evitar detalhes.</div>
                        <div class="quiz-option" data-question="module7-q2" data-answer="d">d) Ser apenas negativo.</div>
                    </div>
                    <p id="explanation-module7-q2" class="explanation hidden"></p>
                `
            },
            module8: {
                id: "module8",
                title: "8. Gestão de Sala",
                iconClass: "fas fa-users",
                content: `
                    <h4 class="text-lg font-semibold mb-2">8.1 Dinâmica de Grupo</h4>
                    <p>Gerenciar interações e promover colaboração.</p>
                    <h4 class="text-lg font-semibold mb-2">8.2 Resolução de Conflitos</h4>
                    <p>Técnicas para lidar com desentendimentos entre alunos.</p>
                    <h4 class="text-lg font-semibold mb-2">8.3 Engajamento</h4>
                    <p>Estratégias para manter a atenção e motivação.</p>
                    <div class="bg-blue-50 p-4 rounded-lg mb-4"><h5 class="font-semibold text-blue-900">Exemplo Prático</h5><p>Um instrutor usa dinâmicas de grupo para resolver conflitos em uma turma.</p></div>
                    <hr class="my-6 border-gray-300">
                    <h3 class="text-xl font-semibold mb-4 text-blue-700">Exercícios de Fixação</h3>
                    <p class="font-semibold mb-2 text-gray-700">1. O que é essencial na gestão de sala?</p>
                    <div class="quiz-options-group space-y-2 mb-4">
                        <div class="quiz-option" data-question="module8-q1" data-answer="a">a) Ignorar conflitos.</div>
                        <div class="quiz-option" data-question="module8-q1" data-answer="b">b) Promover colaboração.</div>
                        <div class="quiz-option" data-question="module8-q1" data-answer="c">c) Focar apenas em um aluno.</div>
                        <div class="quiz-option" data-question="module8-q1" data-answer="d">d) Evitar dinâmicas.</div>
                    </div>
                    <p id="explanation-module8-q1" class="explanation hidden"></p>
                    <p class="font-semibold mt-4 mb-2 text-gray-700">2. Como resolver conflitos em sala?</p>
                    <div class="quiz-options-group space-y-2">
                        <div class="quiz-option" data-question="module8-q2" data-answer="a">a) Ignorá-los.</div>
                        <div class="quiz-option" data-question="module8-q2" data-answer="b">b) Usar técnicas de mediação.</div>
                        <div class="quiz-option" data-question="module8-q2" data-answer="c">c) Excluir alunos.</div>
                        <div class="quiz-option" data-question="module8-q2" data-answer="d">d) Evitar interação.</div>
                    </div>
                    <p id="explanation-module8-q2" class="explanation hidden"></p>
                `
            },
            module9: {
                id: "module9",
                title: "9. Aspectos Legais e Éticos",
                iconClass: "fas fa-balance-scale",
                content: `
                    <h4 class="text-lg font-semibold mb-2">9.1 Responsabilidades Legais</h4>
                    <p>Conhecer normas trabalhistas e educacionais aplicáveis.</p>
                    <h4 class="text-lg font-semibold mb-2">9.2 Ética Profissional</h4>
                    <p>Manter integridade, respeito e imparcialidade.</p>
                    <h4 class="text-lg font-semibold mb-2">9.3 Conformidade</h4>
                    <p>Garantir que o curso siga padrões regulatórios.</p>
                    <div class="bg-blue-50 p-4 rounded-lg mb-4"><h5 class="font-semibold text-blue-900">Exemplo Prático</h5><p>Um instrutor assegura que o curso de segurança cumpre as normas da NR-35.</p></div>
                    <hr class="my-6 border-gray-300">
                    <h3 class="text-xl font-semibold mb-4 text-blue-700">Exercícios de Fixação</h3>
                    <p class="font-semibold mb-2 text-gray-700">1. O que é uma responsabilidade legal do instrutor?</p>
                    <div class="quiz-options-group space-y-2 mb-4">
                        <div class="quiz-option" data-question="module9-q1" data-answer="a">a) Ignorar normas.</div>
                        <div class="quiz-option" data-question="module9-q1" data-answer="b">b) Conhecer regulamentações.</div>
                        <div class="quiz-option" data-question="module9-q1" data-answer="c">c) Focar apenas em prática.</div>
                        <div class="quiz-option" data-question="module9-q1" data-answer="d">d) Evitar certificação.</div>
                    </div>
                    <p id="explanation-module9-q1" class="explanation hidden"></p>
                    <p class="font-semibold mt-4 mb-2 text-gray-700">2. O que caracteriza a ética profissional?</p>
                    <div class="quiz-options-group space-y-2">
                        <div class="quiz-option" data-question="module9-q2" data-answer="a">a) Falta de imparcialidade.</div>
                        <div class="quiz-option" data-question="module9-q2" data-answer="b">b) Respeito e integridade.</div>
                        <div class="quiz-option" data-question="module9-q2" data-answer="c">c) Ignorar alunos.</div>
                        <div class="quiz-option" data-question="module9-q2" data-answer="d">d) Evitar feedback.</div>
                    </div>
                    <p id="explanation-module9-q2" class="explanation hidden"></p>
                `
            },
            module10: {
                id: "module10",
                title: "10. Encerramento e Certificação",
                iconClass: "fas fa-graduation-cap",
                content: `
                    <h4 class="text-lg font-semibold mb-2">10.1 Revisão do Curso</h4>
                    <p>Recapitular os principais aprendizados do curso.</p>
                    <h4 class="text-lg font-semibold mb-2">10.2 Processo de Certificação</h4>
                    <p>Critérios de aprovação e entrega do certificado.</p>
                    <h4 class="text-lg font-semibold mb-2">10.3 Próximos Passos</h4>
                    <p>Oportunidades de carreira e capacitação contínua.</p>
                    <div class="bg-blue-50 p-4 rounded-lg mb-4"><h5 class="font-semibold text-blue-900">Exemplo Prático</h5><p>O instrutor realiza uma dinâmica final e entrega certificados aos aprovados.</p></div>
                    <hr class="my-6 border-gray-300">
                    <h3 class="text-xl font-semibold mb-4 text-blue-700">Exercícios de Fixação</h3>
                    <p class="font-semibold mb-2 text-gray-700">1. O que é feito no encerramento do curso?</p>
                    <div class="quiz-options-group space-y-2 mb-4">
                        <div class="quiz-option" data-question="module10-q1" data-answer="a">a) Ignorar revisões.</div>
                        <div class="quiz-option" data-question="module10-q1" data-answer="b">b) Recapitular aprendizados.</div>
                        <div class="quiz-option" data-question="module10-q1" data-answer="c">c) Evitar certificação.</div>
                        <div class="quiz-option" data-question="module10-q1" data-answer="d">d) Focar em novos conteúdos.</div>
                    </div>
                    <p id="explanation-module10-q1" class="explanation hidden"></p>
                    <p class="font-semibold mt-4 mb-2 text-gray-700">2. O que inclui o processo de certificação?</p>
                    <div class="quiz-options-group space-y-2">
                        <div class="quiz-option" data-question="module10-q2" data-answer="a">a) Apenas presença.</div>
                        <div class="quiz-option" data-question="module10-q2" data-answer="b">b) Critérios de aprovação.</div>
                        <div class="quiz-option" data-question="module10-q2" data-answer="c">c) Nenhum critério.</div>
                        <div class="quiz-option" data-question="module10-q2" data-answer="d">d) Apenas prática.</div>
                    </div>
                    <p id="explanation-module10-q2" class="explanation hidden"></p>
                `
            }
        };

        // Add the "Concluir Módulo" button to each module's content string
        for (const moduleId in moduleContent) {
            if (moduleContent.hasOwnProperty(moduleId)) {
                moduleContent[moduleId].content += `
                    <div class="mt-8 pt-6 border-t border-gray-200 text-right">
                        <button class="conclude-button" data-module="${moduleId}">
                            Concluir Módulo ${moduleContent[moduleId].title.split('.')[0]}
                        </button>
                    </div>
                `;
            }
        }


        const contentArea = document.getElementById('content-area');
        const moduleSelector = document.getElementById('module-selector');
        const initialContentHtml = contentArea.innerHTML; 

        function populateModuleSelector() {
            Object.values(moduleContent).forEach(module => {
                const option = document.createElement('option');
                option.value = module.id;
                option.textContent = module.title;
                moduleSelector.appendChild(option);
            });
        }

        function loadModuleContent(moduleId) {
            contentArea.classList.add('fade');
            setTimeout(() => {
                if (!moduleId || !moduleContent[moduleId]) {
                    contentArea.innerHTML = initialContentHtml; 
                } else {
                    const moduleData = moduleContent[moduleId];
                    let moduleHtml = `
                        <h2 class="text-2xl font-semibold mb-6 flex items-center text-blue-800">
                            <i class="${moduleData.iconClass} mr-3 text-orange-500 fa-fw"></i>${moduleData.title}
                        </h2>
                        <div>${moduleData.content}</div>`; // Removed extra text-gray-700... wrapper
                                   
                    contentArea.innerHTML = moduleHtml;
                    setupQuizListeners(); 
                    setupConcludeButtonListeners(); 
                }
                contentArea.classList.remove('fade');
            }, 300);
        }
        
        function getCorrectAnswerText(questionId) {
            const correctAnswerValue = correctAnswers[questionId];
            // Find the correct option element within the current contentArea
            const correctOptionElement = contentArea.querySelector(`.quiz-option[data-question="${questionId}"][data-answer="${correctAnswerValue}"]`);
            return correctOptionElement ? correctOptionElement.textContent.trim() : "a opção correta";
        }

        function setupQuizListeners() {
            const quizOptions = contentArea.querySelectorAll('.quiz-option');
            quizOptions.forEach(option => {
                // Clone and replace to remove old listeners if any persisted weirdly, though direct add should be fine with proper scoping
                const newOption = option.cloneNode(true);
                option.parentNode.replaceChild(newOption, option);

                newOption.addEventListener('click', () => {
                    const questionId = newOption.dataset.question;
                    const selectedAnswer = newOption.dataset.answer;
                    const actualCorrectAnswer = correctAnswers[questionId];
                    const explanationP = contentArea.querySelector(`#explanation-${questionId}`); // Scope to contentArea
                    
                    const parentGroup = newOption.closest('.quiz-options-group') || newOption.parentElement;
                    parentGroup.querySelectorAll(`.quiz-option[data-question="${questionId}"]`).forEach(opt => {
                        opt.disabled = true;
                        if (opt.dataset.answer === actualCorrectAnswer) {
                            opt.classList.add('correct');
                        }
                    });

                    if (selectedAnswer === actualCorrectAnswer) {
                        newOption.classList.add('correct');
                        if (explanationP) {
                            explanationP.innerHTML = `<strong class="text-green-700">Correto!</strong> A resposta é "${getCorrectAnswerText(questionId)}".`;
                            explanationP.className = 'explanation text-sm p-2 mt-1 rounded bg-green-50 border border-green-200 text-green-700';
                        }
                    } else {
                        newOption.classList.add('incorrect');
                        if (explanationP) {
                            explanationP.innerHTML = `<strong class="text-red-700">Incorreto.</strong> A resposta correta é "${getCorrectAnswerText(questionId)}".`;
                             explanationP.className = 'explanation text-sm p-2 mt-1 rounded bg-red-50 border border-red-200 text-red-700';
                        }
                    }
                });
            });
        }

        function setupConcludeButtonListeners() {
            const buttons = contentArea.querySelectorAll('.conclude-button');
            buttons.forEach(button => {
                const newButton = button.cloneNode(true); // Clone to remove previous listeners
                button.parentNode.replaceChild(newButton, button);
                
                if (completedModules.includes(newButton.dataset.module)) {
                    newButton.disabled = true;
                    newButton.textContent = 'Módulo Concluído';
                } else {
                    newButton.disabled = false;
                     // Set button text correctly based on module name
                    const moduleKey = newButton.dataset.module;
                    if (moduleContent[moduleKey] && moduleContent[moduleKey].title) {
                        newButton.textContent = `Concluir Módulo ${moduleContent[moduleKey].title.split('.')[0]}`;
                    }
                }
                newButton.addEventListener('click', handleConcludeButtonClick);
            });
        }

        function handleConcludeButtonClick(event) {
            const button = event.currentTarget;
            const moduleId = button.dataset.module;
            if (moduleId && !completedModules.includes(moduleId)) {
                markModuleCompleted(moduleId);
                button.disabled = true;
                button.textContent = 'Módulo Concluído';
            }
        }
        
        function updateProgress() {
            const progress = Math.min((completedModules.length / totalModules) * 100, 100);
            document.getElementById('progress-text').textContent = `${progress.toFixed(0)}%`;
            document.getElementById('progress-bar').style.width = `${progress}%`;
            localStorage.setItem('gateInstructorCompletedModules', JSON.stringify(completedModules));

            // Update conclude buttons state globally after progress update
            document.querySelectorAll('.conclude-button').forEach(btn => {
                const modId = btn.dataset.module;
                if (completedModules.includes(modId)) {
                    btn.disabled = true;
                    btn.textContent = 'Módulo Concluído';
                }
            });

            if (completedModules.length >= totalModules) {
                showCertificateForm();
                showCongratulations();
                launchConfetti();
            }
        }

        function markModuleCompleted(moduleId) {
            if (!completedModules.includes(moduleId)) {
                completedModules.push(moduleId);
                updateProgress();
            }
        }

        function showCongratulations() {
            const congratsMessage = document.getElementById('congratulations-message');
            congratsMessage.classList.remove('hidden');
            congratsMessage.classList.add('show');
        }

        function launchConfetti() {
            confetti({ particleCount: 150, spread: 90, origin: { y: 0.6 }, zIndex: 200 });
            setTimeout(() => confetti({ particleCount: 70, spread: 120, origin: { y: 0.8 }, zIndex: 200 }), 250);
        }

        function showCertificateForm() {
            const formContainer = document.getElementById('certificate-form-container');
            formContainer.classList.add('show');
            // Scroll to form if it's out of view, especially on mobile
            formContainer.scrollIntoView({ behavior: 'smooth', block: 'center' });
        }

        document.getElementById('close-congrats').addEventListener('click', () => {
            const congratsMessage = document.getElementById('congratulations-message');
            congratsMessage.classList.remove('show');
            setTimeout(() => congratsMessage.classList.add('hidden'), 500);
        });

        document.getElementById('submit-certificate').addEventListener('click', () => {
            const name = document.getElementById('full-name').value;
            const cpf = document.getElementById('cpf').value;
            const email = document.getElementById('email').value;
            if (name && cpf && email) {
                alert(`Solicitação enviada!\nNome: ${name}\nCPF: ${cpf}\nE-mail: ${email}\nEntraremos em contato em breve.`);
            } else {
                alert('Por favor, preencha todos os campos obrigatórios.');
            }
        });

        moduleSelector.addEventListener('change', (event) => {
            loadModuleContent(event.target.value);
        });

        // Initialize
        populateModuleSelector();
        updateProgress(); // Load progress from localStorage and update UI
        const initialModuleId = moduleSelector.value || (Object.keys(moduleContent).length > 0 ? Object.keys(moduleContent)[0] : '');
        if (initialModuleId && moduleContent[initialModuleId]) {
             loadModuleContent(initialModuleId);
        } else {
             contentArea.innerHTML = initialContentHtml; 
        }

    </script>
</body>
</html>